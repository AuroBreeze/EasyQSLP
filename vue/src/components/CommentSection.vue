<script setup lang="ts">
import CommentCard from './CommentCard.vue'

defineProps<{
  articleId?: string
  comments?: any[]
}>()

// æ¨¡æ‹Ÿè¯„è®ºæ•°æ®
const mockComments = [
  {
    id: '1',
    content: 'è¿™ç¯‡æ–‡ç« å†™å¾—éå¸¸è¯¦ç»†ï¼ŒVue 3 çš„ç»„ä»¶åŒ–æ€è·¯è®²è§£å¾—å¾ˆæ¸…æ¥šï¼Œç‰¹åˆ«æ˜¯ Composition API çš„éƒ¨åˆ†è®©æˆ‘å—ç›ŠåŒªæµ…ã€‚ä½œè€…çš„ä»£ç ç¤ºä¾‹ä¹Ÿå¾ˆå®ç”¨ï¼Œç›´æ¥å¯ä»¥åº”ç”¨åˆ°é¡¹ç›®ä¸­ã€‚',
    rating: 4 as const,
    user: {
      name: 'å‰ç«¯å°ç™½',
      avatar: ''
    },
    updatedAt: '2å¤©å‰',
    participants: [
      { name: 'Vueå¤§å¸ˆ', avatar: '' },
      { name: 'ä»£ç å°ç™½', avatar: '' },
      { name: 'å­¦ä¹ è€…A', avatar: '' },
      { name: 'å¼€å‘è€…B', avatar: '' },
      { name: 'å‰ç«¯çˆ±å¥½è€…', avatar: '' },
      { name: 'æŠ€æœ¯å®…', avatar: '' },
      { name: 'ç¨‹åºçŒ¿', avatar: '' }
    ]
  },
  {
    id: '2', 
    content: 'å†…å®¹è¿˜è¡Œï¼Œä½†æ˜¯æ„Ÿè§‰æœ‰äº›åœ°æ–¹è®²å¾—ä¸å¤Ÿæ·±å…¥ï¼Œå¸Œæœ›èƒ½è¡¥å……æ›´å¤šå®æˆ˜æ¡ˆä¾‹ã€‚',
    rating: 3 as const,
    user: {
      name: 'CodeMaster',
      avatar: ''
    },
    updatedAt: '1å‘¨å‰',
    participants: [
      { name: 'å®æˆ˜æ´¾', avatar: '' },
      { name: 'æ¡ˆä¾‹åˆ†æå¸ˆ', avatar: '' },
      { name: 'æ·±åº¦å­¦ä¹ è€…', avatar: '' }
    ]
  },
  {
    id: '3',
    content: 'çœ‹å®Œäº†ï¼Œæ„Ÿè§‰ä¸€èˆ¬èˆ¬ï¼Œæ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆæœ‰ç”¨ã€‚å¯èƒ½æ˜¯æˆ‘æœŸæœ›å¤ªé«˜äº†å§ã€‚',
    rating: 2 as const,
    user: {
      name: 'å­¦ä¹ è€…',
      avatar: ''
    },
    updatedAt: '3å¤©å‰'
  },
  {
    id: '4',
    content: 'è¿™ç§åŸºç¡€å†…å®¹ç½‘ä¸Šåˆ°å¤„éƒ½æœ‰ï¼Œæ²¡ä»€ä¹ˆæ–°æ„ï¼Œæµªè´¹æ—¶é—´ã€‚',
    rating: 1 as const,
    user: {
      name: 'èµ„æ·±å¼€å‘',
      avatar: ''
    },
    updatedAt: '5å¤©å‰'
  }
]
</script>

<template>
  <div class="comment-section">
    <header class="comment__header">
      <h3 class="comment__title">è¯„è®ºåŒº</h3>
      <div class="comment__stats">
        <span class="stats-item">{{ mockComments.length }} æ¡è¯„è®º</span>
        <span class="stats-item">å¹³å‡è¯„åˆ† 3.2/4.0</span>
      </div>
    </header>
    
    <div class="comment__content">
      <!-- è¯„è®ºåˆ—è¡¨ -->
      <div class="comment-list">
        <CommentCard 
          v-for="comment in mockComments" 
          :key="comment.id" 
          :comment="comment" 
        />
      </div>
      
      <!-- å‘è¡¨è¯„è®º -->
      <div class="comment-form">
        <h4 class="form-title">å‘è¡¨è¯„è®º</h4>
        <textarea 
          class="comment-input" 
          placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..."
          rows="3"
        ></textarea>
        <div class="form-actions">
          <div class="rating-selector">
            <span class="selector-label">è¯„åˆ†ï¼š</span>
            <button class="rating-btn" data-rating="1">ğŸ˜ ä¸æ»¡æ„</button>
            <button class="rating-btn" data-rating="2">ğŸ˜ å¹³åº¸</button>
            <button class="rating-btn" data-rating="3">ğŸ˜Š è¿˜å¯ä»¥</button>
            <button class="rating-btn active" data-rating="4">ğŸ¤© æ£’æäº†</button>
          </div>
          <button class="submit-btn">å‘å¸ƒè¯„è®º</button>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.comment-section {
  background: #2f2f2f;
  border-radius: 8px;
  padding: 24px;
  min-height: 400px;
}

/* æ ‡é¢˜åŒºåŸŸ */
.comment__header {
  display: flex;
  justify-content: between;
  align-items: flex-start;
  margin-bottom: 24px;
  gap: 16px;
}
.comment__title {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: #e5e5e5;
  flex: 1;
}
.comment__stats {
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-align: right;
}
.stats-item {
  font-size: 12px;
  color: rgba(255,255,255,0.6);
}

/* è¯„è®ºåˆ—è¡¨ */
.comment-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-bottom: 32px;
}

/* å‘è¡¨è¯„è®ºè¡¨å• */
.comment-form {
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 24px;
}
.form-title {
  margin: 0 0 16px;
  font-size: 16px;
  font-weight: 600;
  color: #e5e5e5;
}
.comment-input {
  width: 100%;
  padding: 12px 16px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 6px;
  color: rgba(255,255,255,0.9);
  font-size: 14px;
  line-height: 1.5;
  resize: vertical;
  margin-bottom: 16px;
}
.comment-input:focus {
  outline: none;
  border-color: #e50914;
  background: rgba(255,255,255,0.08);
}
.comment-input::placeholder {
  color: rgba(255,255,255,0.4);
}

/* è¡¨å•æ“ä½œåŒº */
.form-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
}
.rating-selector {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
.selector-label {
  font-size: 14px;
  color: rgba(255,255,255,0.7);
  margin-right: 4px;
}
.rating-btn {
  padding: 6px 12px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 20px;
  color: rgba(255,255,255,0.7);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.rating-btn:hover {
  background: rgba(255,255,255,0.12);
  border-color: rgba(255,255,255,0.25);
}
.rating-btn.active {
  background: rgba(42, 213, 115, 0.2);
  border-color: #2ed573;
  color: #2ed573;
}
.submit-btn {
  padding: 10px 24px;
  background: #e50914;
  border: none;
  border-radius: 4px;
  color: #fff;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}
.submit-btn:hover {
  background: #f40612;
  transform: translateY(-1px);
}

/* å“åº”å¼ */
@media (max-width: 768px) {
  .comment__header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
  .comment__stats {
    text-align: left;
  }
  .form-actions {
    flex-direction: column;
    align-items: stretch;
  }
  .rating-selector {
    justify-content: center;
  }
}
</style>
